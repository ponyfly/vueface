<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=750, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
    <div id="app">
        <div class="pages">
            <div class="page page-index">
            	<div id="img-area"></div>
                <div class="other">
                	<div class="leaf"></div>
	                <div class="mail_front"></div>
	                <div class="mail_botton"></div>
                	<div class="leftline"></div>
                	<div class="light"></div>
                	<div class="leaf01"></div>
                	<div class="leaf02"></div>
                	<div class="leaf03"></div>
                	<div class="leaf04"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/zepto.min.js"></script>
    <script src="js/fx.js"></script>
    <script>

    var imgs,
        hash = location.hash;

    try{
        imgs = JSON.parse(hash.substring(1))
    }catch(err){
        imgs = [
            "img/test01.jpg",
            "img/test02.jpg",
            "img/test03.jpg"
        ]
    }

    var $imgArea = $("#img-area"),
        $mail = $(".mail_front"),
        imgsTop = $mail.position().top - Math.floor(Math.random() * 40) + "px";

    function imgInit() {
        var imgStr = '';
        for (var i = 0; i < imgs.length; i++) {
            var pos = picPosition();
            imgStr += "<img src='" + imgs[i] + "' style='" + pos + "' /> "
        }
        $imgArea.html(imgStr)
    }

    imgInit()

    function picPosition() {
        var left = Math.floor(Math.random() * 180) + 50 + "px";
        var rotate = Math.floor(Math.random() * 40) + "deg";
        return "left:" + left + ";transform:rotate(" + rotate + "); width:180px; top:" + imgsTop;
    }

    var oldindex = 0,
        newindex = 0;
    var $imgs = $("#img-area img");''

    setTimeout(function(){
        $imgs.eq(0).css({
            "z-index": 97,
            width: "575px",
            top: "120px",
            left: "100px",
            transform: "rotate(0)"
        })
    },900)



    setInterval(function() {
        oldindex = newindex;
        var $old = $imgs.eq(oldindex);
            

        $old.css({
            "z-index": 96
        })
        $old.css({
            width: "180px",
            top: imgsTop,
            left: Math.floor(Math.random() * 180) + 50 + "px",
            transform: "rotate(" + Math.floor(Math.random() * 40) + "deg)"
        })
   
        if (oldindex < imgs.length - 1) {
            newindex = oldindex + 1
        } else {
            newindex = 0
        }
        var $new  = $imgs.eq(newindex);

        setTimeout(function(){
            $new.css({
                "z-index": 97
            })
            $new.css({
                width: "575px",
                top: "120px",
                left: "100px",
                transform: "rotate(0)"
            })
        },1000)


    }, 5000)
    </script>
</body>
</html>