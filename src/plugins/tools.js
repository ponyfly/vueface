function Tools(){this._init.apply(this,arguments)}var mychoiceis="T7B16YMQNHH5S6EAAPRFLVDY95QM1C";Tools.prototype={varructor:Tools,_init:function(){this.channel="album-gamma-first"},_ajaxGetData:function(K,s){$.ajax({method:K.method,url:K.url,data:K.data,timeout:15e3}).done(function(K){s&&s(K)}).fail(function(K,s){console.log(s)})},_readerImg:function(K,s){var x=this,d=0,N=K.files[0];EXIF.getData(N,function(){EXIF.pretty(this),EXIF.getTag(this,"PixelXDimension"),EXIF.getTag(this,"PixelYDimension");var K=EXIF.getTag(this,"Orientation");3==K?d=180:6==K?d=90:8==K?d=270:1==K&&(d=0),localStorage.setItem("_rotate",d)});var f=new FileReader;f.readAsDataURL(N),f.onload=function(K){x.fileReader64=this.result,s&&s(x.fileReader64)}},_Compress:function(K,s){var x=$("<canvas></canvas>")[0],d=x.getContext("2d");if(!K)return void console.log("no file 不正常的调用");var N="object"!=typeof K,f=0,J=N?K:URL.createObjectURL(K),v=new Image;v.onload=function(){var K=this.width,N=this.height,J=K/N,S=K,j=N;K>1e3&&(S=1e3,j=1e3/J);var R=f%2>0,z=R?j:S,k=R?S:j;x.width=z,x.height=k,d.save(),d.translate(z/2,k/2),d.rotate(90*f/180*Math.PI),d.drawImage(v,0,0,K,N,-S/2,-j/2,S,j),d.restore(),s&&s(x.toDataURL("image/jpeg",.6))},N?v.src=J:EXIF.getData(K,function(){f=EXIF.getTag(this,"Orientation"),f=f>=2&&f<=8?(f-1)%4:0,v.src=J})},_GetQueryString:function(K){var s=new RegExp("(^|&)"+K+"=([^&]*)(&|$)"),x=window.location.search.substr(1).match(s);return null!=x?unescape(x[2]):null},_send1_1:function(K,s,x){function d(){return null==J?(window.localStorage?localStorage.setItem("uuid",v):N._setCookie("uuid",v),v):J}var N=this,f="",J=localStorage.getItem("uuid")||N._getCookie("uuid"),v=N._uuid();f=void 0==s?N.channel:s;var S=null==N._GetQueryString("jcnappid")?d():N._GetQueryString("jcnappid"),j=null==N._GetQueryString("jcnuserid")?d():N._GetQueryString("jcnuserid"),R=new Image;K&&"string"==typeof K&&(R.src="/js/1x1.gif?ucs=UTF-8&un=statistic_channel."+f+"_logname."+K+"_login.0&timestamp="+(new Date-0)+"&jcnappid="+S+"&jcnuserid="+j),console.log("loading-1*1"),R.onload=function(){console.log("1*1 loaded"),x&&x()}},_uuid:function(){var K="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return Math.uuid=function(s,x){var d,N=K,f=[];if(x=x||N.length,s)for(d=0;d<s;d++)f[d]=N[0|Math.random()*x];else{var J;for(f[8]=f[13]=f[18]=f[23]="-",f[14]="4",d=0;d<36;d++)f[d]||(J=0|16*Math.random(),f[d]=N[19==d?3&J|8:J])}return f.join("")},Math.uuidFast=function(){for(var s,x=K,d=new Array(36),N=0,f=0;f<36;f++)8==f||13==f||18==f||23==f?d[f]="-":14==f?d[f]="4":(N<=2&&(N=33554432+16777216*Math.random()|0),s=15&N,N>>=4,d[f]=x[19==f?3&s|8:s]);return d.join("")},Math.uuidCompact=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(K){var s=16*Math.random()|0;return("x"==K?s:3&s|8).toString(16)})},Math.uuidCompact()},_setCookie:function(K,s){var x=new Date;x.setTime(x.getTime()+2592e6),document.cookie=K+"="+escape(s)+";expires="+x.toGMTString()},_getCookie:function(K){var s,x=new RegExp("(^| )"+K+"=([^;]*)(;|$)");return(s=document.cookie.match(x))?unescape(s[2]):null},_delCookie:function(K){var s=new Date;s.setTime(s.getTime()-1);var x=getCookie(K);null!=x&&(document.cookie=K+"="+x+";expires="+s.toGMTString())},_runningEnvironment:function(){var K=navigator.userAgent.toLowerCase(),s=K.indexOf("micromessenger")>-1,x=K.indexOf("qq")>-1,d=K.indexOf("weibo")>-1,N=K.indexOf("iphone")>-1,f=K.indexOf("android")>-1,J=K.indexOf("ucbrowser")>-1;return{weixin:s,qq:x,weibo:d,iphone:N,android:f,baidu:K.indexOf("baidu")>-1,pc:J?window.screen.width/2>768:window.screen.width>768,momo:K.indexOf("momowebview")>-1}},_testUrl:function(K){return/^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-\.,@?^=%&:\/~\+#]*[\w\-\@?^=%&\/~\+#])?$/.test(K)}},window.TOOLS=new Tools;